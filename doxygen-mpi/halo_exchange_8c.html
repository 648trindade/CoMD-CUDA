<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>CoMD: haloExchange.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CoMD
   </div>
   <div id="projectbrief">A Mini-app for Co-Design of Classical Molecular Dynamics.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('halo_exchange_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">haloExchange.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Communicate halo data such as "ghost" atoms with neighboring tasks.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="halo_exchange_8h_source.html">haloExchange.h</a>&quot;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="_co_m_d_types_8h_source.html">CoMDTypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="decomposition_8h_source.html">decomposition.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="parallel_8h_source.html">parallel.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="link_cells_8h_source.html">linkCells.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="eam_8h_source.html">eam.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mem_utils_8h_source.html">memUtils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="performance_timers_8h_source.html">performanceTimers.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for haloExchange.c:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c__incl.png" border="0" usemap="#halo_exchange_8c" alt=""/></div>
<map name="halo_exchange_8c" id="halo_exchange_8c">
<area shape="rect" id="node2" href="halo_exchange_8h.html" title="Communicate halo data such as &quot;ghost&quot; atoms with neighboring tasks." alt="" coords="5,155,123,181"/><area shape="rect" id="node5" href="_co_m_d_types_8h.html" title="CoMD data structures." alt="" coords="265,80,375,107"/><area shape="rect" id="node8" href="decomposition_8h.html" title="Parallel domain decomposition." alt="" coords="421,155,544,181"/><area shape="rect" id="node10" href="parallel_8h.html" title="Wrappers for MPI functions." alt="" coords="626,80,701,107"/><area shape="rect" id="node7" href="link_cells_8h.html" title="Functions to maintain link cell structures for fast pair finding." alt="" coords="148,155,231,181"/><area shape="rect" id="node11" href="eam_8h.html" title="Compute forces for the Embedded Atom Model (EAM)." alt="" coords="727,80,785,107"/><area shape="rect" id="node12" href="mem_utils_8h.html" title="Wrappers for memory allocation." alt="" coords="809,80,900,107"/><area shape="rect" id="node14" href="performance_timers_8h.html" title="Performance timer functions." alt="" coords="451,80,601,107"/><area shape="rect" id="node3" href="mytype_8h.html" title="Frequently needed typedefs." alt="" coords="311,229,389,256"/><area shape="rect" id="node9" href="init_atoms_8h.html" title="Initialize the atom configuration." alt="" coords="305,155,396,181"/></map>
</div>
</div>
<p><a href="halo_exchange_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_atom_exchange_parms_st.html">AtomExchangeParmsSt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extra data members that are needed for the exchange of atom data.  <a href="struct_atom_exchange_parms_st.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_force_exchange_parms_st.html">ForceExchangeParmsSt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extra data members that are needed for the exchange of force data.  <a href="struct_force_exchange_parms_st.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_atom_msg_st.html">AtomMsgSt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to package data for a single atom to pack into a send/recv buffer.  <a href="struct_atom_msg_st.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_force_msg_st.html">ForceMsgSt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Package data for the force exchange.  <a href="struct_force_msg_st.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad935f1ff1a50822e317bdb321ce991ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#ad935f1ff1a50822e317bdb321ce991ad">MAX</a>(A, B)&#160;&#160;&#160;((A) &gt; (B) ? (A) : (B))</td></tr>
<tr class="separator:ad935f1ff1a50822e317bdb321ce991ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ace0fad856017816a61c6a841f3ed5be4"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_atom_exchange_parms_st.html">AtomExchangeParmsSt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#ace0fad856017816a61c6a841f3ed5be4">AtomExchangeParms</a></td></tr>
<tr class="memdesc:ace0fad856017816a61c6a841f3ed5be4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extra data members that are needed for the exchange of atom data.  <a href="#ace0fad856017816a61c6a841f3ed5be4">More...</a><br/></td></tr>
<tr class="separator:ace0fad856017816a61c6a841f3ed5be4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfaf03d9368568f9420c85c56f30b119"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_force_exchange_parms_st.html">ForceExchangeParmsSt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#adfaf03d9368568f9420c85c56f30b119">ForceExchangeParms</a></td></tr>
<tr class="memdesc:adfaf03d9368568f9420c85c56f30b119"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extra data members that are needed for the exchange of force data.  <a href="#adfaf03d9368568f9420c85c56f30b119">More...</a><br/></td></tr>
<tr class="separator:adfaf03d9368568f9420c85c56f30b119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ea28520e9b50eaeb3e79579f583d8a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_atom_msg_st.html">AtomMsgSt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a30ea28520e9b50eaeb3e79579f583d8a">AtomMsg</a></td></tr>
<tr class="memdesc:a30ea28520e9b50eaeb3e79579f583d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A structure to package data for a single atom to pack into a send/recv buffer.  <a href="#a30ea28520e9b50eaeb3e79579f583d8a">More...</a><br/></td></tr>
<tr class="separator:a30ea28520e9b50eaeb3e79579f583d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85360d5f38c3b63903d0ff2f6e11125a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_force_msg_st.html">ForceMsgSt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a85360d5f38c3b63903d0ff2f6e11125a">ForceMsg</a></td></tr>
<tr class="memdesc:a85360d5f38c3b63903d0ff2f6e11125a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Package data for the force exchange.  <a href="#a85360d5f38c3b63903d0ff2f6e11125a">More...</a><br/></td></tr>
<tr class="separator:a85360d5f38c3b63903d0ff2f6e11125a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a27065e89c73c059d2f450ee484c60448"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448">HaloFaceOrder</a> { <br/>
&#160;&#160;<a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448a8f9da95af3789900c22d3635e0326582">HALO_X_MINUS</a>, 
<a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448a549161bd34f14c9a97f0972992d71d9e">HALO_X_PLUS</a>, 
<a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448aebbee666f96cfdd52c0eff1a477d5b39">HALO_Y_MINUS</a>, 
<a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448a76b7bbcd575e1a0deabf7be3fc6f9af9">HALO_Y_PLUS</a>, 
<br/>
&#160;&#160;<a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448acda9cebf51d68b168951d3df21a7f0b8">HALO_Z_MINUS</a>, 
<a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448ad5b06e80b8ad4a079a2dfa56b341c950">HALO_Z_PLUS</a>
<br/>
 }</td></tr>
<tr class="memdesc:a27065e89c73c059d2f450ee484c60448"><td class="mdescLeft">&#160;</td><td class="mdescRight">Don't change the order of the faces in this enum.  <a href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448">More...</a><br/></td></tr>
<tr class="separator:a27065e89c73c059d2f450ee484c60448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae301ac5899829c77fcf67e89d5cbf114"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#ae301ac5899829c77fcf67e89d5cbf114">HaloAxisOrder</a> { <a class="el" href="halo_exchange_8c.html#ae301ac5899829c77fcf67e89d5cbf114a396d4dbb44d4919f65353098137d2ec3">HALO_X_AXIS</a>, 
<a class="el" href="halo_exchange_8c.html#ae301ac5899829c77fcf67e89d5cbf114a174c1dc895e2abb65cdcb0bd1b30dec8">HALO_Y_AXIS</a>, 
<a class="el" href="halo_exchange_8c.html#ae301ac5899829c77fcf67e89d5cbf114a65802f538ea58bac84f28dd213d547bc">HALO_Z_AXIS</a>
 }</td></tr>
<tr class="memdesc:ae301ac5899829c77fcf67e89d5cbf114"><td class="mdescLeft">&#160;</td><td class="mdescRight">Don't change the order of the axes in this enum.  <a href="halo_exchange_8c.html#ae301ac5899829c77fcf67e89d5cbf114">More...</a><br/></td></tr>
<tr class="separator:ae301ac5899829c77fcf67e89d5cbf114"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:addffdff2c6d5209a75fa2aae4178d4e4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#addffdff2c6d5209a75fa2aae4178d4e4">initHaloExchange</a> (<a class="el" href="decomposition_8h.html#a34a5819a0b47b97378ee81dd90eeedc2">Domain</a> *domain)</td></tr>
<tr class="memdesc:addffdff2c6d5209a75fa2aae4178d4e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class constructor.  <a href="#addffdff2c6d5209a75fa2aae4178d4e4">More...</a><br/></td></tr>
<tr class="separator:addffdff2c6d5209a75fa2aae4178d4e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a448c7af8a5ee9fcc5a05966d263c8699"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a448c7af8a5ee9fcc5a05966d263c8699">exchangeData</a> (<a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> *<a class="el" href="halo_exchange_8h.html#a6299c18094f40719d8f69818eedebcc7">haloExchange</a>, void *data, int iAxis)</td></tr>
<tr class="memdesc:a448c7af8a5ee9fcc5a05966d263c8699"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the function that does the heavy lifting for the communication of halo data.  <a href="#a448c7af8a5ee9fcc5a05966d263c8699">More...</a><br/></td></tr>
<tr class="separator:a448c7af8a5ee9fcc5a05966d263c8699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7697d7cf57c1d431a62a3b802fdc117"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#ae7697d7cf57c1d431a62a3b802fdc117">mkAtomCellList</a> (<a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *boxes, enum <a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448">HaloFaceOrder</a> iFace, const int nCells)</td></tr>
<tr class="memdesc:ae7697d7cf57c1d431a62a3b802fdc117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a list of link cells that need to be sent across the specified face.  <a href="#ae7697d7cf57c1d431a62a3b802fdc117">More...</a><br/></td></tr>
<tr class="separator:ae7697d7cf57c1d431a62a3b802fdc117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e8d0e0b1ccf8ab73c15e12da3382d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a55e8d0e0b1ccf8ab73c15e12da3382d8">loadAtomsBuffer</a> (void *vparms, void *data, int face, char *charBuf)</td></tr>
<tr class="memdesc:a55e8d0e0b1ccf8ab73c15e12da3382d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The loadBuffer function for a halo exchange of atom data.  <a href="#a55e8d0e0b1ccf8ab73c15e12da3382d8">More...</a><br/></td></tr>
<tr class="separator:a55e8d0e0b1ccf8ab73c15e12da3382d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0225c2b91c4fea4fa79d762d226e7bc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#af0225c2b91c4fea4fa79d762d226e7bc">unloadAtomsBuffer</a> (void *vparms, void *data, int face, int bufSize, char *charBuf)</td></tr>
<tr class="memdesc:af0225c2b91c4fea4fa79d762d226e7bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The unloadBuffer function for a halo exchange of atom data.  <a href="#af0225c2b91c4fea4fa79d762d226e7bc">More...</a><br/></td></tr>
<tr class="separator:af0225c2b91c4fea4fa79d762d226e7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab94b139834bbe388c3ff8b8e9d34cb54"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#ab94b139834bbe388c3ff8b8e9d34cb54">destroyAtomsExchange</a> (void *vparms)</td></tr>
<tr class="separator:ab94b139834bbe388c3ff8b8e9d34cb54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb597fcd3c68f5b3fd30f811db78881e"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#afb597fcd3c68f5b3fd30f811db78881e">mkForceSendCellList</a> (<a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *boxes, int face, int nCells)</td></tr>
<tr class="memdesc:afb597fcd3c68f5b3fd30f811db78881e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a list of link cells that need to send data across the specified face.  <a href="#afb597fcd3c68f5b3fd30f811db78881e">More...</a><br/></td></tr>
<tr class="separator:afb597fcd3c68f5b3fd30f811db78881e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaafb7968fbb96f65683a62c1cc2f249a"><td class="memItemLeft" align="right" valign="top">static int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#aaafb7968fbb96f65683a62c1cc2f249a">mkForceRecvCellList</a> (<a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *boxes, int face, int nCells)</td></tr>
<tr class="memdesc:aaafb7968fbb96f65683a62c1cc2f249a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a list of link cells that need to receive data across the specified face.  <a href="#aaafb7968fbb96f65683a62c1cc2f249a">More...</a><br/></td></tr>
<tr class="separator:aaafb7968fbb96f65683a62c1cc2f249a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62c01d184d04c4c46bd2a904d073285f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a62c01d184d04c4c46bd2a904d073285f">loadForceBuffer</a> (void *vparms, void *vdata, int face, char *charBuf)</td></tr>
<tr class="memdesc:a62c01d184d04c4c46bd2a904d073285f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The loadBuffer function for a force exchange.  <a href="#a62c01d184d04c4c46bd2a904d073285f">More...</a><br/></td></tr>
<tr class="separator:a62c01d184d04c4c46bd2a904d073285f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30670dc4164ae4246695781ea72d4ca4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a30670dc4164ae4246695781ea72d4ca4">unloadForceBuffer</a> (void *vparms, void *vdata, int face, int bufSize, char *charBuf)</td></tr>
<tr class="memdesc:a30670dc4164ae4246695781ea72d4ca4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The unloadBuffer function for a force exchange.  <a href="#a30670dc4164ae4246695781ea72d4ca4">More...</a><br/></td></tr>
<tr class="separator:a30670dc4164ae4246695781ea72d4ca4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de35d44e682baed545931fcfa798533"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a7de35d44e682baed545931fcfa798533">destroyForceExchange</a> (void *vparms)</td></tr>
<tr class="separator:a7de35d44e682baed545931fcfa798533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adce6df6ee629674941d4af97f7805ebc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#adce6df6ee629674941d4af97f7805ebc">sortAtomsById</a> (const void *a, const void *b)</td></tr>
<tr class="memdesc:adce6df6ee629674941d4af97f7805ebc"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function suitable for passing to qsort to sort atoms by gid.  <a href="#adce6df6ee629674941d4af97f7805ebc">More...</a><br/></td></tr>
<tr class="separator:adce6df6ee629674941d4af97f7805ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0beb5e682d35f76acec61a5670b256a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#ac0beb5e682d35f76acec61a5670b256a">initAtomHaloExchange</a> (<a class="el" href="decomposition_8h.html#a34a5819a0b47b97378ee81dd90eeedc2">Domain</a> *domain, <a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *boxes)</td></tr>
<tr class="memdesc:ac0beb5e682d35f76acec61a5670b256a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a HaloExchange for atom data.  <a href="#ac0beb5e682d35f76acec61a5670b256a">More...</a><br/></td></tr>
<tr class="separator:ac0beb5e682d35f76acec61a5670b256a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa1aa54957677f40462913c45facf5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a0fa1aa54957677f40462913c45facf5a">initForceHaloExchange</a> (<a class="el" href="decomposition_8h.html#a34a5819a0b47b97378ee81dd90eeedc2">Domain</a> *domain, <a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *boxes)</td></tr>
<tr class="memdesc:a0fa1aa54957677f40462913c45facf5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The force exchange is considerably simpler than the atom exchange.  <a href="#a0fa1aa54957677f40462913c45facf5a">More...</a><br/></td></tr>
<tr class="separator:a0fa1aa54957677f40462913c45facf5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84877eb5da5763f36ba159f81b348723"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a84877eb5da5763f36ba159f81b348723">destroyHaloExchange</a> (<a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> **<a class="el" href="halo_exchange_8h.html#a6299c18094f40719d8f69818eedebcc7">haloExchange</a>)</td></tr>
<tr class="memdesc:a84877eb5da5763f36ba159f81b348723"><td class="mdescLeft">&#160;</td><td class="mdescRight">HaloExchange destructor.  <a href="#a84877eb5da5763f36ba159f81b348723">More...</a><br/></td></tr>
<tr class="separator:a84877eb5da5763f36ba159f81b348723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6299c18094f40719d8f69818eedebcc7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#a6299c18094f40719d8f69818eedebcc7">haloExchange</a> (<a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> *haloExchange, void *data)</td></tr>
<tr class="memdesc:a6299c18094f40719d8f69818eedebcc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute a halo exchange.  <a href="#a6299c18094f40719d8f69818eedebcc7">More...</a><br/></td></tr>
<tr class="separator:a6299c18094f40719d8f69818eedebcc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af19bdec7d00b16354607a2418d4bc561"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="halo_exchange_8c.html#af19bdec7d00b16354607a2418d4bc561">sortAtomsInCell</a> (<a class="el" href="init_atoms_8h.html#a2b35224968f0f7418171c32a889ce9d0">Atoms</a> *atoms, <a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *boxes, int iBox)</td></tr>
<tr class="memdesc:af19bdec7d00b16354607a2418d4bc561"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sort the atoms by gid in the specified link cell.  <a href="#af19bdec7d00b16354607a2418d4bc561">More...</a><br/></td></tr>
<tr class="separator:af19bdec7d00b16354607a2418d4bc561"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Communicate halo data such as "ghost" atoms with neighboring tasks. </p>
<p>In addition to ghost atoms, the EAM potential also needs to exchange some force information. Hence this file implements both an atom exchange and a force exchange, each with slightly different properties due to their different roles.</p>
<p>The halo exchange in CoMD 1.1 takes advantage of the Cartesian domain decomposition as well as the link cell structure to quickly determine what data needs to be sent.</p>
<p>This halo exchange implementation is able to send data to all 26 neighboring tasks using only 6 messages. This is accomplished by sending data across the x-faces, then the y-faces, and finally across the z-faces. Some of the data that was received from the x-faces is included in the y-face sends and so on. This accumulation of data allows data to reach edge neighbors and corner neighbors by a two or three step process.</p>
<p>The advantage of this type of structured halo exchange is that it minimizes the number of MPI messages to send, and maximizes the size of those messages.</p>
<p>The disadvantage of this halo exchange is that it serializes message traffic. Only two messages can be in flight at once. The x-axis messages must be received and processed before the y-axis messages can begin. Architectures with low message latency and many off node network links would likely benefit from alternate halo exchange strategies that send independent messages to each neighbor task. </p>

<p>Definition in file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad935f1ff1a50822e317bdb321ce991ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">A, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">B&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((A) &gt; (B) ? (A) : (B))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00043">43</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ace0fad856017816a61c6a841f3ed5be4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_atom_exchange_parms_st.html">AtomExchangeParmsSt</a>
 <a class="el" href="halo_exchange_8c.html#ace0fad856017816a61c6a841f3ed5be4">AtomExchangeParms</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extra data members that are needed for the exchange of atom data. </p>
<p>For an atom exchange, the <a class="el" href="struct_halo_exchange_st.html#afbf8527c027d969adcae7bf7485a2ee6" title="A pointer to a sub-class specific structure that contains additional data members needed by the sub-c...">HaloExchangeSt::parms</a> will point to a structure of this type. </p>

</div>
</div>
<a class="anchor" id="a30ea28520e9b50eaeb3e79579f583d8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_atom_msg_st.html">AtomMsgSt</a>
 <a class="el" href="halo_exchange_8c.html#a30ea28520e9b50eaeb3e79579f583d8a">AtomMsg</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A structure to package data for a single atom to pack into a send/recv buffer. </p>
<p>Also used for sorting atoms within link cells. </p>

</div>
</div>
<a class="anchor" id="adfaf03d9368568f9420c85c56f30b119"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_force_exchange_parms_st.html">ForceExchangeParmsSt</a>
 <a class="el" href="halo_exchange_8c.html#adfaf03d9368568f9420c85c56f30b119">ForceExchangeParms</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extra data members that are needed for the exchange of force data. </p>
<p>For an force exchange, the <a class="el" href="struct_halo_exchange_st.html#afbf8527c027d969adcae7bf7485a2ee6" title="A pointer to a sub-class specific structure that contains additional data members needed by the sub-c...">HaloExchangeSt::parms</a> will point to a structure of this type. </p>

</div>
</div>
<a class="anchor" id="a85360d5f38c3b63903d0ff2f6e11125a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_force_msg_st.html">ForceMsgSt</a>
 <a class="el" href="halo_exchange_8c.html#a85360d5f38c3b63903d0ff2f6e11125a">ForceMsg</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Package data for the force exchange. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ae301ac5899829c77fcf67e89d5cbf114"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="halo_exchange_8c.html#ae301ac5899829c77fcf67e89d5cbf114">HaloAxisOrder</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Don't change the order of the axes in this enum. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ae301ac5899829c77fcf67e89d5cbf114a396d4dbb44d4919f65353098137d2ec3"></a>HALO_X_AXIS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ae301ac5899829c77fcf67e89d5cbf114a174c1dc895e2abb65cdcb0bd1b30dec8"></a>HALO_Y_AXIS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ae301ac5899829c77fcf67e89d5cbf114a65802f538ea58bac84f28dd213d547bc"></a>HALO_Z_AXIS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00051">51</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

</div>
</div>
<a class="anchor" id="a27065e89c73c059d2f450ee484c60448"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448">HaloFaceOrder</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Don't change the order of the faces in this enum. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a27065e89c73c059d2f450ee484c60448a8f9da95af3789900c22d3635e0326582"></a>HALO_X_MINUS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a27065e89c73c059d2f450ee484c60448a549161bd34f14c9a97f0972992d71d9e"></a>HALO_X_PLUS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a27065e89c73c059d2f450ee484c60448aebbee666f96cfdd52c0eff1a477d5b39"></a>HALO_Y_MINUS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a27065e89c73c059d2f450ee484c60448a76b7bbcd575e1a0deabf7be3fc6f9af9"></a>HALO_Y_PLUS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a27065e89c73c059d2f450ee484c60448acda9cebf51d68b168951d3df21a7f0b8"></a>HALO_Z_MINUS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a27065e89c73c059d2f450ee484c60448ad5b06e80b8ad4a079a2dfa56b341c950"></a>HALO_Z_PLUS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00046">46</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab94b139834bbe388c3ff8b8e9d34cb54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void destroyAtomsExchange </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vparms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00427">427</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_ab94b139834bbe388c3ff8b8e9d34cb54_icgraph.png" border="0" usemap="#halo_exchange_8c_ab94b139834bbe388c3ff8b8e9d34cb54_icgraph" alt=""/></div>
<map name="halo_exchange_8c_ab94b139834bbe388c3ff8b8e9d34cb54_icgraph" id="halo_exchange_8c_ab94b139834bbe388c3ff8b8e9d34cb54_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#ad23258401e7398f07edae0c606d0bcfb" title="Create a HaloExchange for atom data." alt="" coords="224,5,387,32"/><area shape="rect" id="node3" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="435,5,539,32"/><area shape="rect" id="node4" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="587,5,637,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7de35d44e682baed545931fcfa798533"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void destroyForceExchange </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vparms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00593">593</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a7de35d44e682baed545931fcfa798533_icgraph.png" border="0" usemap="#halo_exchange_8c_a7de35d44e682baed545931fcfa798533_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a7de35d44e682baed545931fcfa798533_icgraph" id="halo_exchange_8c_a7de35d44e682baed545931fcfa798533_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#a11079a6e10fd7a6357fdffa6f5107857" title="Create a HaloExchange for force data." alt="" coords="219,5,383,32"/><area shape="rect" id="node3" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="432,5,515,32"/><area shape="rect" id="node4" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="563,5,653,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="702,5,797,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="845,5,949,32"/><area shape="rect" id="node7" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="997,5,1048,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a84877eb5da5763f36ba159f81b348723"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroyHaloExchange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> **&#160;</td>
          <td class="paramname"><em>haloExchange</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HaloExchange destructor. </p>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00239">239</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a84877eb5da5763f36ba159f81b348723_icgraph.png" border="0" usemap="#halo_exchange_8c_a84877eb5da5763f36ba159f81b348723_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a84877eb5da5763f36ba159f81b348723_icgraph" id="halo_exchange_8c_a84877eb5da5763f36ba159f81b348723_icgraph">
<area shape="rect" id="node2" href="_co_m_d_8c.html#aa90c0a0ecf8bba8c512c8c556c5967c8" title="frees all data associated with *ps and frees *ps" alt="" coords="360,5,493,32"/><area shape="rect" id="node4" href="eam_8c.html#abd959aeb739f0c01dac13ab3544be142" title="eamDestroy" alt="" coords="214,56,311,83"/><area shape="rect" id="node3" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="837,31,888,57"/><area shape="rect" id="node5" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="382,56,471,83"/><area shape="rect" id="node6" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="542,56,637,83"/><area shape="rect" id="node7" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="685,56,789,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a448c7af8a5ee9fcc5a05966d263c8699"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void exchangeData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> *&#160;</td>
          <td class="paramname"><em>haloExchange</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iAxis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the function that does the heavy lifting for the communication of halo data. </p>
<p>It is called once for each axis and sends and receives two message. Loading and unloading of the buffers is in the hands of the sub-class virtual functions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">iAxis</td><td>Axis index. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td>Pointer to data that will be passed to the load and unload functions </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00277">277</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_cgraph.png" border="0" usemap="#halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_cgraph" alt=""/></div>
<map name="halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_cgraph" id="halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_cgraph">
<area shape="rect" id="node2" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="191,5,286,32"/><area shape="rect" id="node3" href="parallel_8c.html#a09fe85c4c25e7fd7b8c280f2d2763158" title="Wrapper for MPI_Sendrecv." alt="" coords="165,56,312,83"/><area shape="rect" id="node4" href="mem_utils_8h.html#a6e9c992503ca7d317d2d06dc7de952db" title="comdFree" alt="" coords="197,107,281,133"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_icgraph.png" border="0" usemap="#halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_icgraph" id="halo_exchange_8c_a448c7af8a5ee9fcc5a05966d263c8699_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#a6299c18094f40719d8f69818eedebcc7" title="Execute a halo exchange." alt="" coords="166,31,274,57"/><area shape="rect" id="node3" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="323,5,405,32"/><area shape="rect" id="node8" href="timestep_8h.html#ac19a9ed6e42be6da5b3aa705ebf2aa84" title="Update local and remote link cells after atoms have moved." alt="" coords="593,56,725,83"/><area shape="rect" id="node4" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="454,5,543,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="611,5,706,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="773,5,877,32"/><area shape="rect" id="node7" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="925,31,976,57"/><area shape="rect" id="node9" href="timestep_8h.html#a412cece7eeafdceb6343252471d3dc37" title="Advance the simulation time to t+dt using a leap frog method (equivalent to velocity verlet)..." alt="" coords="787,56,864,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6299c18094f40719d8f69818eedebcc7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void haloExchange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> *&#160;</td>
          <td class="paramname"><em>haloExchange</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute a halo exchange. </p>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00246">246</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_cgraph.png" border="0" usemap="#halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_cgraph" alt=""/></div>
<map name="halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_cgraph" id="halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_cgraph">
<area shape="rect" id="node2" href="halo_exchange_8c.html#a448c7af8a5ee9fcc5a05966d263c8699" title="This is the function that does the heavy lifting for the communication of halo data." alt="" coords="163,56,274,83"/><area shape="rect" id="node3" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="349,5,443,32"/><area shape="rect" id="node4" href="parallel_8c.html#a09fe85c4c25e7fd7b8c280f2d2763158" title="Wrapper for MPI_Sendrecv." alt="" coords="323,56,469,83"/><area shape="rect" id="node5" href="mem_utils_8h.html#a6e9c992503ca7d317d2d06dc7de952db" title="comdFree" alt="" coords="354,107,438,133"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_icgraph.png" border="0" usemap="#halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_icgraph" id="halo_exchange_8c_a6299c18094f40719d8f69818eedebcc7_icgraph">
<area shape="rect" id="node2" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="163,5,245,32"/><area shape="rect" id="node7" href="timestep_8h.html#ac19a9ed6e42be6da5b3aa705ebf2aa84" title="Update local and remote link cells after atoms have moved." alt="" coords="433,56,565,83"/><area shape="rect" id="node3" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="294,5,383,32"/><area shape="rect" id="node4" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="451,5,546,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="613,5,717,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="765,31,816,57"/><area shape="rect" id="node8" href="timestep_8h.html#a412cece7eeafdceb6343252471d3dc37" title="Advance the simulation time to t+dt using a leap frog method (equivalent to velocity verlet)..." alt="" coords="627,56,704,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac0beb5e682d35f76acec61a5670b256a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a>* initAtomHaloExchange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="decomposition_8h.html#a34a5819a0b47b97378ee81dd90eeedc2">Domain</a> *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *&#160;</td>
          <td class="paramname"><em>boxes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a HaloExchange for atom data. </p>
<p>When called in proper sequence by redistributeAtoms, the atom halo exchange helps serve three purposes:</p>
<ul>
<li>Send ghost atom data to neighbor tasks.</li>
<li>Shift atom coordinates by the global simulation size when they cross periodic boundaries. This shift is performed in loadAtomsBuffer.</li>
<li>Transfer ownership of atoms between tasks as the atoms move across spatial domain boundaries. This transfer of ownership occurs in two places. The former owner gives up ownership when updateLinkCells moves a formerly local atom into a halo link cell. The new owner accepts ownership when unloadAtomsBuffer calls putAtomInBox to place a received atom into a local link cell.</li>
</ul>
<p>This constructor does the following:</p>
<ul>
<li>Sets the bufCapacity to hold the largest possible number of atoms that can be sent across a face.</li>
<li>Initialize function pointers to the atom-specific versions</li>
<li>Sets the number of link cells to send across each face.</li>
<li>Builds the list of link cells to send across each face. As explained in the comments for mkAtomCellList, this list must include any link cell, local or halo, that could possibly contain an atom that needs to be sent across the face. Atoms that need to be sent include "ghost atoms" that are located in local link cells that correspond to halo link cells on receiving tasks as well as formerly local atoms that have just moved into halo link cells and need to be sent to the rank that owns the spatial domain the atom has moved into.</li>
<li>Sets a coordinate shift factor for each face to account for periodic boundary conditions. For most faces the factor is zero. For faces on the +x, +y, or +z face of the simulation domain the factor is -1.0 (to shift the coordinates by -1 times the simulation domain size). For -x, -y, and -z faces of the simulation domain, the factor is +1.0.</li>
</ul>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="timestep_8h.html#ac19a9ed6e42be6da5b3aa705ebf2aa84" title="Update local and remote link cells after atoms have moved.">redistributeAtoms</a> </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00144">144</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_cgraph.png" border="0" usemap="#halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_cgraph" alt=""/></div>
<map name="halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_cgraph" id="halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_cgraph">
<area shape="rect" id="node2" href="halo_exchange_8c.html#addffdff2c6d5209a75fa2aae4178d4e4" title="Base class constructor." alt="" coords="237,107,366,133"/><area shape="rect" id="node5" href="halo_exchange_8c.html#a55e8d0e0b1ccf8ab73c15e12da3382d8" title="The loadBuffer function for a halo exchange of atom data." alt="" coords="239,208,364,235"/><area shape="rect" id="node6" href="halo_exchange_8c.html#af0225c2b91c4fea4fa79d762d226e7bc" title="The unloadBuffer function for a halo exchange of atom data." alt="" coords="232,157,371,184"/><area shape="rect" id="node10" href="halo_exchange_8c.html#ab94b139834bbe388c3ff8b8e9d34cb54" title="destroyAtomsExchange" alt="" coords="216,259,387,285"/><area shape="rect" id="node3" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="443,56,538,83"/><area shape="rect" id="node11" href="halo_exchange_8c.html#ae7697d7cf57c1d431a62a3b802fdc117" title="Make a list of link cells that need to be sent across the specified face." alt="" coords="242,5,361,32"/><area shape="rect" id="node4" href="decomposition_8c.html#ac4b6650f8ae558b450e3e81098fc93c8" title="Find the MPI rank of a neighbor domain from a relative coordinate." alt="" coords="435,107,546,133"/><area shape="rect" id="node7" href="link_cells_8c.html#ade255fea5f6aec94b86bb57424e1ab8b" title="putAtomInBox" alt="" coords="435,157,547,184"/><area shape="rect" id="node8" href="link_cells_8c.html#a2738fea8d13f074f348ca666f3fd8740" title="Get the index of the link cell that contains the specified coordinate." alt="" coords="595,107,733,133"/><area shape="rect" id="node9" href="link_cells_8c.html#aefdb5c50c2b08f163c52c9e7ab5129f4" title="Calculates the link cell index from the grid coords." alt="" coords="782,56,917,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_icgraph.png" border="0" usemap="#halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_icgraph" alt=""/></div>
<map name="halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_icgraph" id="halo_exchange_8c_ac0beb5e682d35f76acec61a5670b256a_icgraph">
<area shape="rect" id="node2" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="216,5,320,32"/><area shape="rect" id="node3" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="368,5,419,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0fa1aa54957677f40462913c45facf5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a>* initForceHaloExchange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="decomposition_8h.html#a34a5819a0b47b97378ee81dd90eeedc2">Domain</a> *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *&#160;</td>
          <td class="paramname"><em>boxes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The force exchange is considerably simpler than the atom exchange. </p>
<p>Create a HaloExchange for force data.</p>
<p>In the force case we only need to exchange data that is needed to complete the force calculation. Since the atoms have not moved we only need to send data from local link cells and we are guaranteed that the same atoms exist in the same order in corresponding halo cells on remote tasks. The only tricky part is the size of the plane of local cells that needs to be sent grows in each direction. This is because the y-axis send must send some of the data that was received from the x-axis send, and the z-axis must send some data from the y-axis send. This accumulation of data to send is responsible for data reaching neighbor cells that share only edges or corners.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="eam_8c.html" title="Compute forces for the Embedded Atom Model (EAM).">eam.c</a> for an explanation of the requirement to exchange force data. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00205">205</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_cgraph.png" border="0" usemap="#halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_cgraph" alt=""/></div>
<map name="halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_cgraph" id="halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_cgraph">
<area shape="rect" id="node2" href="halo_exchange_8c.html#addffdff2c6d5209a75fa2aae4178d4e4" title="Base class constructor." alt="" coords="237,157,366,184"/><area shape="rect" id="node5" href="halo_exchange_8c.html#a62c01d184d04c4c46bd2a904d073285f" title="The loadBuffer function for a force exchange." alt="" coords="241,208,361,235"/><area shape="rect" id="node6" href="halo_exchange_8c.html#a30670dc4164ae4246695781ea72d4ca4" title="The unloadBuffer function for a force exchange." alt="" coords="234,259,369,285"/><area shape="rect" id="node7" href="halo_exchange_8c.html#a7de35d44e682baed545931fcfa798533" title="destroyForceExchange" alt="" coords="219,309,384,336"/><area shape="rect" id="node3" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="453,107,547,133"/><area shape="rect" id="node8" href="halo_exchange_8c.html#afb597fcd3c68f5b3fd30f811db78881e" title="Make a list of link cells that need to send data across the specified face." alt="" coords="224,56,379,83"/><area shape="rect" id="node10" href="halo_exchange_8c.html#aaafb7968fbb96f65683a62c1cc2f249a" title="Make a list of link cells that need to receive data across the specified face." alt="" coords="225,5,378,32"/><area shape="rect" id="node4" href="decomposition_8c.html#ac4b6650f8ae558b450e3e81098fc93c8" title="Find the MPI rank of a neighbor domain from a relative coordinate." alt="" coords="445,157,555,184"/><area shape="rect" id="node9" href="link_cells_8c.html#aefdb5c50c2b08f163c52c9e7ab5129f4" title="Calculates the link cell index from the grid coords." alt="" coords="433,31,567,57"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_icgraph.png" border="0" usemap="#halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_icgraph" id="halo_exchange_8c_a0fa1aa54957677f40462913c45facf5a_icgraph">
<area shape="rect" id="node2" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="219,5,301,32"/><area shape="rect" id="node3" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="350,5,439,32"/><area shape="rect" id="node4" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="489,5,583,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="632,5,736,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="784,5,835,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="addffdff2c6d5209a75fa2aae4178d4e4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="halo_exchange_8h.html#ac71e327a19e97aef72f9ceae0287025b">HaloExchange</a> * initHaloExchange </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="decomposition_8h.html#a34a5819a0b47b97378ee81dd90eeedc2">Domain</a> *&#160;</td>
          <td class="paramname"><em>domain</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Base class constructor. </p>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00253">253</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_cgraph.png" border="0" usemap="#halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_cgraph" alt=""/></div>
<map name="halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_cgraph" id="halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_cgraph">
<area shape="rect" id="node2" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="193,5,287,32"/><area shape="rect" id="node3" href="decomposition_8c.html#ac4b6650f8ae558b450e3e81098fc93c8" title="Find the MPI rank of a neighbor domain from a relative coordinate." alt="" coords="185,56,295,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_icgraph.png" border="0" usemap="#halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_icgraph" alt=""/></div>
<map name="halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_icgraph" id="halo_exchange_8c_addffdff2c6d5209a75fa2aae4178d4e4_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#ad23258401e7398f07edae0c606d0bcfb" title="Create a HaloExchange for atom data." alt="" coords="397,5,560,32"/><area shape="rect" id="node5" href="halo_exchange_8h.html#a11079a6e10fd7a6357fdffa6f5107857" title="Create a HaloExchange for force data." alt="" coords="185,56,349,83"/><area shape="rect" id="node3" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="891,31,995,57"/><area shape="rect" id="node4" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1043,31,1093,57"/><area shape="rect" id="node6" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="437,56,520,83"/><area shape="rect" id="node7" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="609,56,698,83"/><area shape="rect" id="node8" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="747,56,842,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a55e8d0e0b1ccf8ab73c15e12da3382d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int loadAtomsBuffer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vparms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>face</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>charBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The loadBuffer function for a halo exchange of atom data. </p>
<p>Iterates link cells in the cellList and load any atoms into the send buffer. This function also shifts coordinates of the atoms by an appropriate factor if they are being sent across a periodic boundary.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="struct_halo_exchange_st.html#adec819095ee16289fbfa5864c34e451b" title="Pointer to a sub-class specific function to load the send buffer.">HaloExchangeSt::loadBuffer</a> for an explanation of the loadBuffer parameters. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00360">360</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a55e8d0e0b1ccf8ab73c15e12da3382d8_icgraph.png" border="0" usemap="#halo_exchange_8c_a55e8d0e0b1ccf8ab73c15e12da3382d8_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a55e8d0e0b1ccf8ab73c15e12da3382d8_icgraph" id="halo_exchange_8c_a55e8d0e0b1ccf8ab73c15e12da3382d8_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#ad23258401e7398f07edae0c606d0bcfb" title="Create a HaloExchange for atom data." alt="" coords="179,5,341,32"/><area shape="rect" id="node3" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="389,5,493,32"/><area shape="rect" id="node4" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="541,5,592,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a62c01d184d04c4c46bd2a904d073285f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int loadForceBuffer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vparms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>face</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>charBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The loadBuffer function for a force exchange. </p>
<p>Iterate the send list and load the derivative of the embedding energy with respect to the local density into the send buffer.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="struct_halo_exchange_st.html#adec819095ee16289fbfa5864c34e451b" title="Pointer to a sub-class specific function to load the send buffer.">HaloExchangeSt::loadBuffer</a> for an explanation of the loadBuffer parameters. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00542">542</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a62c01d184d04c4c46bd2a904d073285f_icgraph.png" border="0" usemap="#halo_exchange_8c_a62c01d184d04c4c46bd2a904d073285f_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a62c01d184d04c4c46bd2a904d073285f_icgraph" id="halo_exchange_8c_a62c01d184d04c4c46bd2a904d073285f_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#a11079a6e10fd7a6357fdffa6f5107857" title="Create a HaloExchange for force data." alt="" coords="174,5,338,32"/><area shape="rect" id="node3" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="387,5,469,32"/><area shape="rect" id="node4" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="518,5,607,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="657,5,751,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="800,5,904,32"/><area shape="rect" id="node7" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="952,5,1003,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae7697d7cf57c1d431a62a3b802fdc117"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int * mkAtomCellList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="halo_exchange_8c.html#a27065e89c73c059d2f450ee484c60448">HaloFaceOrder</a>&#160;</td>
          <td class="paramname"><em>iFace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nCells</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a list of link cells that need to be sent across the specified face. </p>
<p>For each face, the list must include all cells, local and halo, in the first two planes of link cells. Halo cells must be included in the list of link cells to send since local atoms may have moved from local cells into halo cells on this time step. (Actual remote atoms should have been deleted, so the halo cells should contain only these few atoms that have just crossed.) Sending these atoms will allow them to be reassigned to the task that covers the spatial domain they have moved into.</p>
<p>Note that link cell grid coordinates range from -1 to gridSize[iAxis]. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="link_cells_8h.html#aec6d7de47a8431edf1d51080c7089179">initLinkCells</a> for an explanation link cell grid coordinates.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">boxes</td><td>Link cell information. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">iFace</td><td>Index of the face data will be sent across. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nCells</td><td>Number of cells to send. This is used for a consistency check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The list of cells to send. Caller is responsible to free the list. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00327">327</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_cgraph.png" border="0" usemap="#halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_cgraph" alt=""/></div>
<map name="halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_cgraph" id="halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_cgraph">
<area shape="rect" id="node2" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="194,5,289,32"/><area shape="rect" id="node3" href="link_cells_8c.html#aefdb5c50c2b08f163c52c9e7ab5129f4" title="Calculates the link cell index from the grid coords." alt="" coords="174,56,309,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_icgraph.png" border="0" usemap="#halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_icgraph" alt=""/></div>
<map name="halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_icgraph" id="halo_exchange_8c_ae7697d7cf57c1d431a62a3b802fdc117_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#ad23258401e7398f07edae0c606d0bcfb" title="Create a HaloExchange for atom data." alt="" coords="173,5,336,32"/><area shape="rect" id="node3" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="384,5,488,32"/><area shape="rect" id="node4" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="536,5,587,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaafb7968fbb96f65683a62c1cc2f249a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int * mkForceRecvCellList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>face</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nCells</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a list of link cells that need to receive data across the specified face. </p>
<p>Note that this list must be compatible with the corresponding send list to ensure that the data goes to the correct atoms.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="link_cells_8h.html#aec6d7de47a8431edf1d51080c7089179">initLinkCells</a> for information about the conventions for grid coordinates of link cells. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00494">494</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_cgraph.png" border="0" usemap="#halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_cgraph" alt=""/></div>
<map name="halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_cgraph" id="halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_cgraph">
<area shape="rect" id="node2" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="229,5,323,32"/><area shape="rect" id="node3" href="link_cells_8c.html#aefdb5c50c2b08f163c52c9e7ab5129f4" title="Calculates the link cell index from the grid coords." alt="" coords="209,56,343,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_icgraph.png" border="0" usemap="#halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_icgraph" alt=""/></div>
<map name="halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_icgraph" id="halo_exchange_8c_aaafb7968fbb96f65683a62c1cc2f249a_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#a11079a6e10fd7a6357fdffa6f5107857" title="Create a HaloExchange for force data." alt="" coords="209,5,373,32"/><area shape="rect" id="node3" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="421,5,504,32"/><area shape="rect" id="node4" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="553,5,642,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="691,5,786,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="835,5,939,32"/><area shape="rect" id="node7" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="987,5,1037,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afb597fcd3c68f5b3fd30f811db78881e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int * mkForceSendCellList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>face</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nCells</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make a list of link cells that need to send data across the specified face. </p>
<p>Note that this list must be compatible with the corresponding recv list to ensure that the data goes to the correct atoms.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="link_cells_8h.html#aec6d7de47a8431edf1d51080c7089179">initLinkCells</a> for information about the conventions for grid coordinates of link cells. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00445">445</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_cgraph.png" border="0" usemap="#halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_cgraph" alt=""/></div>
<map name="halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_cgraph" id="halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_cgraph">
<area shape="rect" id="node2" href="mem_utils_8h.html#a68c1412c76de7663cb4cbb94d90ddb5b" title="comdMalloc" alt="" coords="229,5,323,32"/><area shape="rect" id="node3" href="link_cells_8c.html#aefdb5c50c2b08f163c52c9e7ab5129f4" title="Calculates the link cell index from the grid coords." alt="" coords="209,56,343,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_icgraph.png" border="0" usemap="#halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_icgraph" alt=""/></div>
<map name="halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_icgraph" id="halo_exchange_8c_afb597fcd3c68f5b3fd30f811db78881e_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#a11079a6e10fd7a6357fdffa6f5107857" title="Create a HaloExchange for force data." alt="" coords="209,5,373,32"/><area shape="rect" id="node3" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="421,5,504,32"/><area shape="rect" id="node4" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="553,5,642,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="691,5,786,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="835,5,939,32"/><area shape="rect" id="node7" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="987,5,1037,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adce6df6ee629674941d4af97f7805ebc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int sortAtomsById </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A function suitable for passing to qsort to sort atoms by gid. </p>
<p>Because every atom in the simulation is supposed to have a unique id, this function checks that the atoms have different gids. If that assertion ever fails it is a sign that something has gone wrong elsewhere in the code. </p>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00651">651</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_adce6df6ee629674941d4af97f7805ebc_icgraph.png" border="0" usemap="#halo_exchange_8c_adce6df6ee629674941d4af97f7805ebc_icgraph" alt=""/></div>
<map name="halo_exchange_8c_adce6df6ee629674941d4af97f7805ebc_icgraph" id="halo_exchange_8c_adce6df6ee629674941d4af97f7805ebc_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#a1fd215a00c394182bec1417771cc9231" title="Sort the atoms by gid in the specified link cell." alt="" coords="169,31,290,57"/><area shape="rect" id="node3" href="timestep_8h.html#ac19a9ed6e42be6da5b3aa705ebf2aa84" title="Update local and remote link cells after atoms have moved." alt="" coords="339,31,471,57"/><area shape="rect" id="node4" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="520,5,624,32"/><area shape="rect" id="node6" href="timestep_8h.html#a412cece7eeafdceb6343252471d3dc37" title="Advance the simulation time to t+dt using a leap frog method (equivalent to velocity verlet)..." alt="" coords="533,56,611,83"/><area shape="rect" id="node5" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="672,31,723,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af19bdec7d00b16354607a2418d4bc561"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sortAtomsInCell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="init_atoms_8h.html#a2b35224968f0f7418171c32a889ce9d0">Atoms</a> *&#160;</td>
          <td class="paramname"><em>atoms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="link_cells_8h.html#af029003339607f1033a378d5e216ccc1">LinkCell</a> *&#160;</td>
          <td class="paramname"><em>boxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>iBox</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sort the atoms by gid in the specified link cell. </p>
<p>The force exchange assumes that the atoms are in the same order in both a given local link cell and the corresponding remote cell(s). However, the atom exchange does not guarantee this property, especially when atoms cross a domain decomposition boundary and move from one task to another. Trying to maintain the atom order during the atom exchange would immensely complicate that code. Instead, we just sort the atoms after the atom exchange. </p>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00612">612</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_cgraph.png" border="0" usemap="#halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_cgraph" alt=""/></div>
<map name="halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_cgraph" id="halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_cgraph">
<area shape="rect" id="node2" href="halo_exchange_8c.html#adce6df6ee629674941d4af97f7805ebc" title="A function suitable for passing to qsort to sort atoms by gid." alt="" coords="176,5,291,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_icgraph.png" border="0" usemap="#halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_icgraph" alt=""/></div>
<map name="halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_icgraph" id="halo_exchange_8c_af19bdec7d00b16354607a2418d4bc561_icgraph">
<area shape="rect" id="node2" href="timestep_8h.html#ac19a9ed6e42be6da5b3aa705ebf2aa84" title="Update local and remote link cells after atoms have moved." alt="" coords="177,31,309,57"/><area shape="rect" id="node3" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="357,5,461,32"/><area shape="rect" id="node5" href="timestep_8h.html#a412cece7eeafdceb6343252471d3dc37" title="Advance the simulation time to t+dt using a leap frog method (equivalent to velocity verlet)..." alt="" coords="371,56,448,83"/><area shape="rect" id="node4" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="509,31,560,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af0225c2b91c4fea4fa79d762d226e7bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void unloadAtomsBuffer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vparms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>face</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>charBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The unloadBuffer function for a halo exchange of atom data. </p>
<p>Iterates the receive buffer and places each atom that was received into the link cell that corresponds to the atom coordinate. Note that this naturally accomplishes transfer of ownership of atoms that have moved from one spatial domain to another. Atoms with coordinates in local link cells automatically become local particles. Atoms that are owned by other ranks are automatically placed in halo kink cells. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="struct_halo_exchange_st.html#a7516853aa2387d5d223d16acabd1fb8b" title="Pointer to a sub-class specific function to unload the recv buffer.">HaloExchangeSt::unloadBuffer</a> for an explanation of the unloadBuffer parameters. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00405">405</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_cgraph.png" border="0" usemap="#halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_cgraph" alt=""/></div>
<map name="halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_cgraph" id="halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_cgraph">
<area shape="rect" id="node2" href="link_cells_8c.html#ade255fea5f6aec94b86bb57424e1ab8b" title="putAtomInBox" alt="" coords="192,5,304,32"/><area shape="rect" id="node3" href="link_cells_8c.html#a2738fea8d13f074f348ca666f3fd8740" title="Get the index of the link cell that contains the specified coordinate." alt="" coords="352,5,491,32"/><area shape="rect" id="node4" href="link_cells_8c.html#aefdb5c50c2b08f163c52c9e7ab5129f4" title="Calculates the link cell index from the grid coords." alt="" coords="539,5,674,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_icgraph.png" border="0" usemap="#halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_icgraph" alt=""/></div>
<map name="halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_icgraph" id="halo_exchange_8c_af0225c2b91c4fea4fa79d762d226e7bc_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#ad23258401e7398f07edae0c606d0bcfb" title="Create a HaloExchange for atom data." alt="" coords="192,5,355,32"/><area shape="rect" id="node3" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="403,5,507,32"/><area shape="rect" id="node4" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="555,5,605,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a30670dc4164ae4246695781ea72d4ca4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void unloadForceBuffer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vparms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>face</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>charBuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The unloadBuffer function for a force exchange. </p>
<p>Data is received in an order that naturally aligns with the atom storage so it is simple to put the data where it belongs.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="struct_halo_exchange_st.html#a7516853aa2387d5d223d16acabd1fb8b" title="Pointer to a sub-class specific function to unload the recv buffer.">HaloExchangeSt::unloadBuffer</a> for an explanation of the unloadBuffer parameters. </dd></dl>

<p>Definition at line <a class="el" href="halo_exchange_8c_source.html#l00570">570</a> of file <a class="el" href="halo_exchange_8c_source.html">haloExchange.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="halo_exchange_8c_a30670dc4164ae4246695781ea72d4ca4_icgraph.png" border="0" usemap="#halo_exchange_8c_a30670dc4164ae4246695781ea72d4ca4_icgraph" alt=""/></div>
<map name="halo_exchange_8c_a30670dc4164ae4246695781ea72d4ca4_icgraph" id="halo_exchange_8c_a30670dc4164ae4246695781ea72d4ca4_icgraph">
<area shape="rect" id="node2" href="halo_exchange_8h.html#a11079a6e10fd7a6357fdffa6f5107857" title="Create a HaloExchange for force data." alt="" coords="190,5,354,32"/><area shape="rect" id="node3" href="eam_8c.html#a1edcafec72eaafd6eb3ec01dedb6c70f" title="Calculate potential energy and forces for the EAM potential." alt="" coords="403,5,485,32"/><area shape="rect" id="node4" href="eam_8h.html#ac1d22a30e046f7b354fdeeb235293877" title="Allocate and initialize the EAM potential data structure." alt="" coords="534,5,623,32"/><area shape="rect" id="node5" href="_co_m_d_8c.html#af894f8613ca8116504095340b84eb366" title="decide whether to get LJ or EAM potentials" alt="" coords="673,5,767,32"/><area shape="rect" id="node6" href="_co_m_d_8c.html#ac304e322f79eaff8c0078ffd5bc8b8ab" title="Initialized the main CoMD data stucture, SimFlat, based on command line input from the user..." alt="" coords="816,5,920,32"/><area shape="rect" id="node7" href="_co_m_d_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="968,5,1019,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="halo_exchange_8c.html">haloExchange.c</a></li>
    <li class="footer">Generated on Wed Jun 5 2013 11:08:31 for CoMD by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
